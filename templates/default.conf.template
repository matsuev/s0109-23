# upstream myapp {
#    server myapp-1:7080 weight=5;
#    server myapp-2:7080 weight=2;
#    server myapp-3:7080;
# }


server {
   listen 80;

   location / {
      proxy_pass http://myapp-1:7080;
   }

   location /api/user {
      proxy_pass http://myapp-2:7080;
   }

   location /api/profile {
      proxy_pass http://myapp-3:7080;
   }
}